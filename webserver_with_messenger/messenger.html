
<html>
<head>
	<link href="css/master.css" rel="stylesheet">
    <meta charset="UTF-8">
    <title>Messenger</title>
</head>

<div class="topnav">
    <a class = "active" href="home.html">Home</a>
    <a class = "active" href="friends.html">Friends</a>
    <a class = "active" href="messenger.html">Messenger</a>
    <a class = "active" href="recommendations.html">Recommendations</a>
    <a class = "active" href="about.html">About Us</a>
    <a class = "active" href="support.html">Support</a>
    <a class = "navbar_right" href="/scripts/logout.py">Logout</a>
</div>

<body class="grey_bg">
<div id = "container">
</div>
<iframe src = "/scripts/messenger_submit.py?source=<?source>"
	style = "
border: solid black 0.1em;
"></iframe>

<script defer>

let container = document.getElementById("container");
let conn = new EventSource("/scripts/messenger_messages.py?source=<?source>");

conn.onmessage =
function(e) {
	console.log(e.data);
	container.innerText += "\n" + e.data;
};

conn.onerror = console.log;
conn.onopen = console.log;

</script>

</body>
</html>
