
<html>
<head>
<link href="/css/master.css" rel="stylesheet">
<meta charset="UTF-8">
<title>Messenger</title>
<style>

.message {
	font-size: 150%; 
	border: solid black 0.1em;
}

</style>
</head>
<div class="topnav">
<a class = "active" href="/home.html">Home</a>
<a class = "active" href="/friends.html">Friends</a>
<a class = "active" href="/messenger.html">Messenger</a>
<a class = "active" href="/recommendations.html">Recommendations</a>
</div>
<body>
<h1>Messages: </h1>
<div id = "div" 
	class = "message" 
	style = "visibility: hidden;">
<br/>
</div>
<div id = "container">
</div>
<iframe src = "/scripts/messenger_submit.py?ID1=<?ID1>&ID2=<?ID2>"
	style = "
border: solid black 0.1em;
"></iframe>

<script defer>

let container = document.getElementById("container");
let div = document.getElementById("div");
let conn = new EventSource("/scripts/messenger_messages.py?ID1=<?ID1>&ID2=<?ID2>");

conn.onmessage =
function(e) {
	console.log(e.data);

	
	let new_div = div.cloneNode(true);

	new_div.innerText = e.data;
	new_div.style.visibility = "visible";
	container.appendChild(new_div);
};

conn.onerror = console.log;
conn.onopen = console.log;

</script>

</body>
</html>
